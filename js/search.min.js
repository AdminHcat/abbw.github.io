(function(){function n(e){var t;t=e.length?e.map(function(e){return t=p,n={title:e.title,path:(s.BLOG.ROOT+"/"+e.path).replace(/\/{2,}/g,"/"),date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")},t.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""});var t,n}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',f.innerHTML=t}function i(e,t){return t.lastIndex=0,t.test(e)}function e(e){var t=this.value.trim();if(t){var s=new RegExp(t.replace(/[ ]/g,"|"),"gmi");(function(t){if(a)t(a);else{var e=new XMLHttpRequest;e.open("GET",h,!0),e.onload=function(){if(200<=this.status&&this.status<300){var e=JSON.parse(this.response);a=e instanceof Array?e:e.posts,t(a)}else console.error(this.statusText)},e.onerror=function(){console.error(this.statusText)},e.send()}})(function(e){n(e.filter(function(e){return n=s,i((t=e).title,n)||t.tags.some(function(e){return i(e.name,n)})||i(t.text,n);var t,n})),L.show()}),e.preventDefault()}}var a,s=window||this,t=s.BLOG.even,r=s.BLOG.$,o=r("#search"),c=r("#search-wrap"),l=r("#key"),u=r("#back"),d=r("#search-panel"),f=r("#search-result"),p=r("#search-tpl").innerHTML,h=(s.BLOG.ROOT+"/search.json").replace(/\/{2}/g,"/"),v=(s.BLOG.noop,r("html")),L={show:function(){s.innerWidth<760&&v.classList.add("lock-size"),d.classList.add("in")},hide:function(){s.innerWidth<760&&v.classList.remove("lock-size"),d.classList.remove("in")}};o.addEventListener(t,function(){c.classList.toggle("in"),l.value="",c.classList.contains("in")?l.focus():l.blur()}),u.addEventListener(t,function(){c.classList.remove("in"),L.hide()}),document.addEventListener(t,function(e){"key"!==e.target.id&&"click"===t&&L.hide()}),l.addEventListener("input",e),l.addEventListener(t,e)}).call(this);